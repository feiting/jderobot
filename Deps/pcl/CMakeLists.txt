# CHECK PCL
FIND_PATH( pcl_INCLUDE_DIR NAMES pcl/point_cloud.h PATHS ENV C++LIB ENV PATH PATH_SUFFIXES include/pcl-1.5/ include/pcl-1.6/ include/pcl-1.7/ )

#MESSAGE("PCL LIBRARY FOUND IN ${pcl_INCLUDE_DIR}")
FIND_LIBRARY(with_pcl
    NAMES pcl_surface pcl_registration pcl_segmentation pcl_filters pcl_sample_consensus pcl_io pcl_octree pcl_features pcl_kdtree pcl_common
    PATHS /usr/lib)


IF( pcl_INCLUDE_DIR )
	include_directories (${pcl_INCLUDE_DIR})
    FIND_LIBRARY( pcl_LIBRARY1 NAMES pcl_surface PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY2 NAMES pcl_registration PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY3 NAMES pcl_segmentation PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY4 NAMES pcl_filters PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY5 NAMES pcl_sample_consensus PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY6 NAMES pcl_io PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY7 NAMES pcl_octree PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY8 NAMES pcl_features PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY9 NAMES pcl_kdtree PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
    FIND_LIBRARY( pcl_LIBRARY11 NAMES pcl_common PATHS ENV C++LIB ENV PATH PATH_SUFFIXES lib lib64)
	IF (pcl_LIBRARY1)
		SET (pcl_LIBRARIES ${pcl_LIBRARY1})
	ENDIF()
	IF (pcl_LIBRARY2)
		SET (pcl_LIBRARIES ${pcl_LIBRARY2})
	ENDIF()
	IF (pcl_LIBRARY3)
		SET (pcl_LIBRARIES ${pcl_LIBRARY3})
	ENDIF()
	IF (pcl_LIBRARY4)
		SET (pcl_LIBRARIES ${pcl_LIBRARY4})
	ENDIF()
	IF (pcl_LIBRARY5)
		SET (pcl_LIBRARIES ${pcl_LIBRARY5})
	ENDIF()
	IF (pcl_LIBRARY6)
		SET (pcl_LIBRARIES ${pcl_LIBRARY6})
	ENDIF()
	IF (pcl_LIBRARY7)
		SET (pcl_LIBRARIES ${pcl_LIBRARY7})
	ENDIF()
	IF (pcl_LIBRARY8)
		SET (pcl_LIBRARIES ${pcl_LIBRARY8})
	ENDIF()
	IF (pcl_LIBRARY9)
		SET (pcl_LIBRARIES ${pcl_LIBRARY9})
	ENDIF()
	IF (pcl_LIBRARY10)
		SET (pcl_LIBRARIES ${pcl_LIBRARY10})
	ENDIF()
	IF (pcl_LIBRARY11)
		SET (pcl_LIBRARIES ${pcl_LIBRARY11})
	ENDIF()
    IF( pcl_LIBRARIES )
		MESSAGE("PCL LIBRARY FOUND IN ${pcl_LIBRARIES}")
    ENDIF( pcl_LIBRARIES )
ENDIF(pcl_INCLUDE_DIR)



IF(NOT with_pcl)
    MESSAGE ("*** PCL libraries not found. Are needed to KinectServer component")
endif()
IF(with_pcl)
    MESSAGE ("*** PCL OK")
endif()
